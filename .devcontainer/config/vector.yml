# Vector configuration for Supabase log aggregation
# This configuration is used by the vector service to collect and forward logs

data_dir: /var/lib/vector

sources:
  docker_host:
    type: docker_logs

transforms:
  project_logs:
    type: remap
    inputs:
      - docker_host
    source: |
      .project = "default"
      .event_message = del(.message)
      .appname = del(.container_name)
      .timestamp = del(.timestamp)

sinks:
  logflare_logs:
    type: http
    inputs:
      - project_logs
    uri: http://analytics:4000/api/logs?source_name=vector&api_key=dev_api_key
    encoding:
      codec: json
    healthcheck:
      enabled: true
